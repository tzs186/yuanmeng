webpackJsonp([7],{sNLy:function(e,t){},v0Nq:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"mobile",data:function(){return{userName:"更换手机号",word:"获取短信验证码",isOvertime:!0,updateTel:{mobile:"",token:sessionStorage.getItem("token"),verifyCode:"",password:""},mobile:this.$store.getters.Mobile,rules:{mobile:[{required:!0,message:"请输入新手机号!",trigger:"blur"},{pattern:/^1[2-9]\s*[0-9]{9}$/,message:"手机号码格式错误"}],verifyCode:[{required:!0,message:"请输入短信验证码!",trigger:"blur"}],password:[{required:!0,message:"请输入当前密码!",trigger:"blur"}]}}},mounted:function(){},methods:{submitForm:function(e){var t=this,s=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$axios.post("user/webUpdateMobile",s.setPwd).then(function(e){console.log(e),1024==e.code||t.$message({message:"修改成功",type:"success"})}).catch(function(e){console.log(e)})})},sendMessage:function(){var e=this,t=this;if(t.isOvertime){if(!/^1[3-8]\s*[0-9]{9}$/.test(t.updateTel.mobile))return this.$message({showClose:!0,message:"手机号码格式错误",type:"error"}),!1;var s=60;this.$axios.post("verifyCode/send",{mobile:t.updateTel.mobile,type:2}).then(function(o){if(1e3==o.code){e.$message({message:"发送验证码"+o.desc,type:"success"}),t.isOvertime=!1;var r=setInterval(function(){s--,t.word=s+"秒后重新获取",s<=0&&(t.isOvertime=!0,t.word="获取短信验证码",clearInterval(r))},1e3)}else e.$message({message:o.desc,type:"error"})}).catch(function(e){console.log(e)})}}},components:{userTitle:s("3+Wo").a}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"setTel"},[s("user-title",{attrs:{title:e.userName}}),e._v(" "),s("div",{staticClass:"pwd-div"},[s("el-form",{ref:"updateTel",attrs:{model:e.updateTel,rules:e.rules,"status-icon":"","label-width":"100px"}},[s("el-form-item",{attrs:{label:"当前手机号码"}},[s("span",{staticClass:"myTel"},[e._v(e._s(e.mobile.substr(0,3)+"****"+e.mobile.substr(7)))])]),e._v(" "),s("el-form-item",{attrs:{label:"新手机号",prop:"mobile"}},[s("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.updateTel.mobile,callback:function(t){e.$set(e.updateTel,"mobile",t)},expression:"updateTel.mobile"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"短信验证码",prop:"verifyCode"}},[s("el-input",{staticStyle:{width:"250px"},attrs:{type:"text",autocomplete:"off"},model:{value:e.updateTel.verifyCode,callback:function(t){e.$set(e.updateTel,"verifyCode",t)},expression:"updateTel.verifyCode"}}),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:""==e.updateTel.mobile},on:{click:e.sendMessage}},[e._v(e._s(e.word)+"\n        ")])],1),e._v(" "),s("el-form-item",{attrs:{label:"当前密码",prop:"password"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.updateTel.password,callback:function(t){e.$set(e.updateTel,"password",t)},expression:"updateTel.password"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",disabled:!(""!=e.updateTel.mobile&""!=e.updateTel.verifyCode&""!=e.updateTel.password)},on:{click:function(t){return e.submitForm("updateTel")}}},[e._v("确认修改\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var a=s("VU/8")(o,r,!1,function(e){s("sNLy")},"data-v-f409ce90",null);t.default=a.exports}});
//# sourceMappingURL=7.6827174f480eeecbd23d.js.map